<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Cyberchat Client</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M"
    crossorigin="anonymous">
</head>

<body class="main">
  <div class="container">
    <h1 class="text-center heading">Cyberchat Client</h1>
    <div class="messages">
    </div>
    <form action="javascript:void(0)">
      <label for="message" style="font-weight:bold;color:white">&gt;</label>
      <input type="text" id="message" required autofocus />
    </form>
  </div>

  <script>
    var host = location.origin.replace(/^http/, 'ws')
    var ws = new WebSocket(host);

    ws.onopen = function () {
      setTitle("Connected to Cyber Chat");
    }

    ws.onclose = function () {
      setTitle("DISCONNCETED!");
    }

    ws.onmessage = function (payload) {
      printMessage(payload.data);
    }

    document.forms[0].onsubmit = function () {
      var input = document.getElementById('message');
      ws.send(input.value);
      input.value = '';
    };

    function setTitle(title) {
      document.querySelector('h1').innerHTML = title;
    }

    function printMessage(message) {
      var p = document.createElement('p');
      p.innerHTML = message;
      p.className = 'msg';
      document.querySelector('div.messages').appendChild(p);
    }
  </script>
</body>

</html>